<textarea class="main" id="editor"></textarea>
<button>CURRENT SNAPSHOT</button>
<script src="/channel/bcsocket.js"></script>
<script src="/share/share.uncompressed.js"></script>
<script src="/share/textarea.js"></script>
<script>
var elem = document.getElementById('editor');

sharejs.open('{{id}}', 'text', function(error, doc) {
	window.doc = doc;
	doc.attach_textarea(elem);

	// Get the contents of the document for some reason:
	$('button').on("click", function(){
		console.log(doc.snapshot);
	});

	doc.on('change', function(op) {
		console.log('Version: ' + doc.version);
	});
});
</script>

